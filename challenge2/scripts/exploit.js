// DO NOT EDIT THIS FILE
const hre = require("hardhat");

async function main() {

  const crAmpAddress = "0x2Db6c82CE72C8d7D770ba1b5F5Ed0b6E075066d6";
  const amp = await hre.ethers.getContractAt("ERC20", "0xfF20817765cB7f73d4bde2e66e067E58D11095C2");
  const weth = await hre.ethers.getContractAt("ERC20", "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2");

  const Exploit = await hre.ethers.getContractFactory("Exploit");
  const exploit = await Exploit.deploy();
  await exploit.deployed();
  console.log("Exploit contract deployed to:", exploit.address);

  await exploit.start();

  // Add condition on signer balance has to be greater than xxx
  finalAmpBalance = await amp.balanceOf(crAmpAddress);
  finalEthBalance = await weth.balanceOf(exploit.address);

  if(finalAmpBalance.eq(ethers.utils.parseEther("0"))){
    console.log("Congrats, you've successfully drained crAMP");
  } else {
    console.log("Sorry, not enough AMP drained, there are still %s AMP in the crAMP pool", finalAmpBalance);
  }

  if(finalEthBalance.gt(ethers.utils.parseEther("721"))){
    console.log("Congrats, you've successfully gained over 721 ether");
    console.log("Congrats, you've successfully passed this game");
  } else {
    console.log("Sorry, not enough Ether in you exploit contract, there is only %s ether in your exploit contract", finalEthBalance);
  }

}

main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
